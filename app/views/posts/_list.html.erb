<% posts.each do |post| %>
  <div class="card p-3 mb-1">
    <div class="row">
      <div class="col-1 text-center">
        <div id="vote-actions-<%= post.id %>" class="vote" data-id="<%= post.id %>">
          <div class="upvote <%= is_upvoted post%>" title="upvote"> <img src="/up.svg" class="fs-3 vote-icon" /> </div>
          <span class="fw-semibold score"><%= post.score %></span>
          <div class="downvote <%= is_downvoted post%>" title="downvote"> <img src="/down.svg" class="fs-3 vote-icon" /> </div>
        </div>
      </div>

      <div class="col-11"> 
        <h4 style="margin-bottom: -0.2rem; fw-semibold">
          <%= link_to post.title, community_post_path(post.community_id, post), class: "text-decoration-none" %>
        </h4>
        <small class="extra-small-text"> <%= link_to post.community.name, post.community, class: "text-decoration-none" %> posted by <%= link_to post.account.username, profile_path(post.account.username), class: "text-decoration-none" %> <%= time_ago_in_words post.created_at %> </small>
        <p class="text-muted ms-2 mt-1 mb-2"><%= truncate post.body, length: 200 %></p>
      </div>
    </div>
  </div>
<% end %>

<style>
  .extra-small-text {
    font-size: 0.7em; /* Makes text smaller than the default small tag */
  }
  .vote-icon {
    width: .5em; /* Set the width to 1em */
    height: .5em; /* Set the height to 1em to maintain aspect ratio */
    cursor: pointer; /* Make it clickable */
  }

  .upvote, .downvote {
    display: block;
    width: 100%;
    padding: 3px 0;
    color:#000;
    transition: background-color 0.2s ease;
    border-radius: 50%;
    width: 1.5em;
    height: 1.5em;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .upvote:hover {
    background-color:rgba(173, 216, 230, 0.5)); /* Light blue with transparency */
  }

  .downvote:hover {
    background-color: rgba(255, 182, 193, 0.5); /* Light red with transparency */
  }

  .upvote.active {
    background-color: rgba(145, 227, 255, 0.5); /* Blue for upvote */
    color: white;
  }

  .downvote.active {
    background-color: rgba(255, 147, 164, 0.5); /* Red for downvote */
    color: white;
  }
</style>