<div class="mt-5 mb-5">
  <h2><%= @post.title %></h2>
  <%= simple_format @post.body %>
<hr>
<div class="mb-5"></div>

<%= form_for @comment, remote: true do |f| %>
  <style>
    .border-bottom-only {
      border: none;
      border-bottom: 1px solid #888;
      border-radius: 0;
      outline: none;
      box-shadow: none;
      background-color: transparent;
    }

    .border-bottom-only:focus {
      outline: none !important;
      box-shadow: none !important;
    }
  </style>

  <script>
    document.addEventListener("input", function (event) {
      if (event.target.tagName.toLowerCase() === "textarea") {
        event.target.style.height = "auto";
        event.target.style.height = event.target.scrollHeight + "px";
      }
    });
  </script>

  <%= f.hidden_field :post_id, value: @post.id %>

  <div class="form-group mb-2">
    <h5>Leave a comment</h5>
    <%= f.text_area :message, placeholder: "Your comment goes here", class: "form-control border-bottom-only mb-2", style: "overflow: hidden; resize: none;" %>
  </div>

  <div class="text-end">
    <%= f.submit "Submit comment", class: "btn btn-primary btn-sm" %>
  </div>
<% end %>


<div id="post-comments">
  <%= render partial:"posts/comments", locals: { comments: @post.comments } %>
</div>


</div>